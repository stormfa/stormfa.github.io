var wxShare=function(){return{Encode64:function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e=escape(e);var n,a,i,c,o,l="",r="",s="",u=0;do n=e.charCodeAt(u++),a=e.charCodeAt(u++),r=e.charCodeAt(u++),i=n>>2,c=(3&n)<<4|a>>4,o=(15&a)<<2|r>>6,s=63&r,isNaN(a)?o=s=64:isNaN(r)&&(s=64),l=l+t.charAt(i)+t.charAt(c)+t.charAt(o)+t.charAt(s),n=a=r="",i=c=o=s="";while(u<e.length);return l},load:function(){function e(e,t){var n=new XMLHttpRequest;if(n.open("GET",t,!1),n.send(null),4==n.readyState){if(n.status>=200&&n.status<300||0==n.status||304==n.status){var a=document.getElementsByTagName("HEAD").item(0),i=document.createElement("script");i.language="javascript",i.type="text/javascript",i.id=e;try{i.appendChild(document.createTextNode(n.responseText))}catch(c){i.text=n.responseText}return a.appendChild(i),!0}return!1}return!1}if(0==$("#wxjscfg").length){var t=location.host+location.pathname+location.search;console.log("location.protocol:"+location.protocol);var n="http:",a="cfg.js";"https:"==location.protocol&&(n="https:",a="httpscfg.js"),e("wxjscfg",n+"//www.hunliji.com/p/wedding/index.php/home/WeixinWall/jsticket/0/"+wxShare.Encode64(t)+"/"+a)}},setWeiXinData:function(e){function t(e){var t=document.createElement("script");t.type="text/javascript";var n=document.createTextNode(e);t.appendChild(n),$("body")[0].appendChild(t)}function n(e,t){if(e&&(c=!0),t&&(o=!0),c&&o){var n=a.imgUrl,i=a.link,l=a.title,r=a.desc;wx.onMenuShareTimeline({title:l,link:i,imgUrl:n,success:function(){},cancel:function(){}}),wx.onMenuShareAppMessage({title:l,desc:r,link:i,imgUrl:n,type:"",dataUrl:"",success:function(){},cancel:function(){}}),wx.onMenuShareQQ({title:l,desc:r,link:i,imgUrl:n,success:function(){},cancel:function(){}}),wx.onMenuShareWeibo({title:l,desc:r,link:i,imgUrl:n,success:function(){},cancel:function(){}})}}var a={appId:"",imgUrl:"http://qnm.hunliji.com/o_1a8dlm230v0l146fes31311j4c7.png",link:location.href,desc:"国内最佳跨平台婚礼APP，婚礼筹备、电子请帖、婚礼故事等功能帮您打造完美婚礼，谱写婚礼故事。",title:"婚礼纪--打造完美婚礼！",timelineTitle:""};$.each(e,function(t,n){0==n.length&&(e[t]=a[t])}),a=$.extend({},a,e),0==a.timelineTitle.length&&(a.timelineTitle=a.desc);var i=["var wxData = {",'"appId": "'+a.appId+'",','"imgUrl": "'+a.imgUrl+'",','"link": "'+a.link+'",','"desc": "'+a.desc+'",','"title": "'+a.title+'"',"};","","var wxDataer = {",'"appId": "'+a.appId+'",','"imgUrl": "'+a.imgUrl+'",','"link": "'+a.link+'",','"desc": "'+a.desc+'",','"title": "'+a.title+'"',"};","function getShareData(){","return JSON.stringify(wxData);","}"];t(i.join("\n")),wxShare.load(),wx.ready(function(){n(!0,!0)});var c=!1,o=!1},wxOnReady:function(e){wxShare.load(),wx.ready(function(){e()})},select:function(e,t){var e=arguments[0]?arguments[0]:function(){},t=arguments[1]?arguments[1]:function(){};wx.chooseImage({success:function(n){wxShare.upload(n.localIds,e,t)}})},upload:function(e,t,n){0!=e.length&&wx.uploadImage({localId:e[0],success:function(n){t(e[0],n.serverId)},fail:function(){fw.common.dialog.error("上传失败，图像未能上传到微信服务器"),n()}})}}}();