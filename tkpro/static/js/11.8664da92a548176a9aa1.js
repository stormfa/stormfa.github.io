webpackJsonp([11],{"3Lnp":function(e,t){},vFK7:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("mvHQ"),i=s.n(a),n=s("TIfe"),l=s("jA3A"),o=s("SSeD"),r=s.n(o),c={name:"banner-list",components:{},data:function(){return{tk_logo:r.a,loading:!1,name:"",currentPage:1,pageSize:10,total:0,imgUrl:[],curImgId:-1,myHeaders:{Authorization:Object(n.a)()}}},created:function(){this.loadData()},methods:{loadData:function(){var e=this;this.loading=!0,Object(l.d)(this.name,this.currentPage).then(function(t){if(200!==t.code)return e.$message.error(t.message);e.imgUrl=t.data.list,e.total=t.data.total,console.log(JSON.parse(i()(e.imgUrl))),e.loading=!1}).catch(function(t){console.log(t),e.loading=!1})},beforeUpload:function(e){this.curImgId=e.id},handleSuccess:function(e,t){var s=this;if(this.loading=!0,"200"==e.code){var a={url:e.data[0].url,id:this.curImgId};Object(l.r)(a).then(function(e){if(200!==e.code)return s.$message.error(e.message);s.loadData(),s.$message.success(e.message||"操作成功"),s.loading=!1}).catch(function(e){console.log(e),s.loading=!1})}else this.$message.error(e.message||"文件导入失败，稍后重试"),this.loading=!1},handleFirstSuccess:function(e,t){var s=this;if(this.loading=!0,"200"==e.code){var a=e.data[0].url,i="Banner"+(this.imgUrl.length+1),n={url:a,name:i,id:0};Object(l.a)(i,n).then(function(e){if(200!==e.code)return s.$message.error(e.message);s.loadData(),s.$message.success(e.message||"操作成功"),s.loading=!1}).catch(function(e){console.log(e),s.loading=!1})}else this.$message.error(e.message||"文件导入失败，稍后重试"),this.loading=!1},deleteAdvertise:function(e){var t=this;this.loading=!0,Object(l.c)(e.id).then(function(e){if(200!==e.code)return t.$message.error(e.message);t.loadData(),t.$message.success(e.message||"操作成功"),t.loading=!1}).catch(function(e){console.log(e),t.loading=!1})}}},d={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"banner-list"},[[e._l(e.imgUrl,function(t,a){return s("div",{key:a,staticClass:"panel"},[s("div",{staticClass:"title"},[e._v("BANNER"+e._s(a+1)+"：")]),e._v(" "),t.url?s("img",{attrs:{src:t.url}}):e._e(),e._v(" "),s("el-upload",{staticClass:"upload-demo",attrs:{"show-file-list":!1,action:"http://159.75.125.80:8899/minio/img/upload",headers:e.myHeaders,"before-upload":e.beforeUpload(t),"on-success":e.handleSuccess,limit:1}},[s("el-button",{attrs:{size:"small",type:"primary"}},[e._v("修改")]),e._v(" "),s("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过500kb")])],1),e._v(" "),s("el-button",{staticClass:"delete",attrs:{size:"small",type:"danger"},on:{click:function(s){return e.deleteAdvertise(t)}}},[e._v("删除")])],1)}),e._v(" "),s("div",{staticClass:"panel"},[s("div",{staticClass:"title"}),e._v(" "),s("div",{staticClass:"empty"}),e._v(" "),s("el-upload",{staticClass:"upload-demo",attrs:{"show-file-list":!1,action:"http://159.75.125.80:8899/minio/img/upload",headers:e.myHeaders,"on-success":e.handleFirstSuccess,limit:1}},[s("el-button",{attrs:{size:"small",type:"primary"}},[e._v("添加")]),e._v(" "),s("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过500kb")])],1)],1)]],2)},staticRenderFns:[]};var u=s("VU/8")(c,d,!1,function(e){s("3Lnp")},"data-v-34525550",null);t.default=u.exports}});
//# sourceMappingURL=11.8664da92a548176a9aa1.js.map