{"version":3,"sources":["webpack:///src/views/pms/product/add.vue","webpack:///./src/views/pms/product/add.vue?4738","webpack:///./src/views/pms/product/add.vue","webpack:///src/components/Upload/singleUpload.vue","webpack:///./src/components/Upload/singleUpload.vue?b408","webpack:///./src/components/Upload/singleUpload.vue"],"names":["add","name","components","quillEditor","vue_quill_editor","SingleUpload","singleUpload","data","_this","this","typeList","imgUrl","cardImgUrl","integral","skuArr","skuName","price","rebateRate","shopName","productType","content","productUrl","productName","editorOption","modules","ImageExtend","size","action","response","res","headers","xhr","setRequestHeader","getCookie","token_type","access_token","sizeError","start","end","error","success","change","formData","toolbar","container","header","list","script","indent","direction","color","background","font","align","created","loadData","methods","_this2","Object","tkpro","then","code","$message","message","console","log","JSON","parse","stringify_default","catch","rewardPoint","uploadCallback","push","url","uploadCardCallback","addGoods","$router","path","addLine","removeLine","index","splice","handleOk","_this3","type","length","input","albumPics","join","detailHtml","pics","productCategoryId","productLink","skuList","location","reload","product_add","render","_vm","_h","$createElement","_c","_self","staticClass","_v","_s","attrs","placeholder","model","value","callback","$$v","expression","on","_l","item","key","id","label","staticStyle","flex-direction","margin-bottom","$set","min","max","click","_e","$event","ref","options","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__","props","computed","dialogImageUrl","dialogVisible","disabled","myHeaders","Authorization","auth","handleSuccess","file","$emit","upload","handleRemove","handlePictureCardPreview","handleDownload","Upload_singleUpload","on-success","list-type","scopedSlots","_u","fn","src","alt","slot","visible","update:visible","width"],"mappings":"yLAqEAA,GACAC,KAAA,aACAC,YACAC,YAAAC,EAAA,YACAC,aAAAC,EAAA,GAEAC,KANA,WAMA,IAAAC,EAAAC,KACA,OACAC,YACAC,UACAC,cACAC,SAAA,EACAC,SACAC,QAAA,GACAC,MAAA,EACAC,WAAA,IAEAC,SAAA,GACAC,YAAA,GACAC,QAAA,GACAC,WAAA,GACAC,YAAA,GACAC,cACAC,SACAC,aAEAxB,KAAA,OACAyB,KAAA,EACAC,OAAA,iBAIAC,SAAA,SAAAC,GACA,OAAAA,EAAAtB,MAEAuB,QAAA,SAAAC,GAEAA,EAAAC,iBACA,gBACAxB,EAAAyB,UAAA,YACAzB,EAAAyB,UAAA,YAAAC,WACA1B,EAAAyB,UAAA,YAAAE,aACA,uBAGAC,UAAA,aACAC,MAAA,aACAC,IAAA,aACAC,MAAA,aACAC,QAAA,aACAC,OAAA,SAAAV,EAAAW,MAKAC,SACAC,YACA,uCACA,6BACAC,OAAA,IAAAA,OAAA,MACAC,KAAA,YAAAA,KAAA,aACAC,OAAA,QAAAA,OAAA,YACAC,OAAA,OAAAA,OAAA,SACAC,UAAA,UACAvB,MAAA,+BACAmB,QAAA,oBACAK,WAAAC,kBACAC,YACAC,YACA,UACA,uBAOAC,QA7EA,WA8EA7C,KAAA8C,YAEAC,SACAD,SADA,WACA,IAAAE,EAAAhD,KACMiD,OAAAC,EAAA,EAAAD,GAANE,KAAA,SAAA/B,GACA,SAAAA,EAAAgC,KAAA,OAAAJ,EAAAK,SAAAvB,MAAAV,EAAAkC,SACAN,EAAA/C,SAAAmB,EAAAtB,KACAyD,QAAAC,IAAAC,KAAAC,MAAAC,IAAAX,EAAA/C,cACA2D,MAAA,SAAA9B,GACAyB,QAAAC,IAAA1B,KAEMmB,OAAAC,EAAA,EAAAD,CAAN,WAAAE,KAAA,SAAA/B,GACA,SAAAA,EAAAgC,KAAA,OAAAJ,EAAAK,SAAAvB,MAAAV,EAAAkC,SACAN,EAAA5C,SAAAgB,EAAAtB,KAAA+D,YACAN,QAAAC,IAAAR,EAAA5C,YACAwD,MAAA,SAAA9B,GACAyB,QAAAC,IAAA1B,MAGAgC,eAjBA,SAiBAhE,GACAE,KAAAE,OAAA6D,KAAAjE,EAAAkE,KACAT,QAAAC,IAAAxD,KAAAE,SAEA+D,mBArBA,SAqBAnE,GACAE,KAAAG,WAAA4D,KAAAjE,EAAAkE,KACAT,QAAAC,IAAAxD,KAAAG,aAEA+D,SAzBA,WA0BAlE,KAAAmE,QAAAJ,MAAAK,KAAA,qBAEAC,QA5BA,WA6BArE,KAAAK,OAAA0D,MACAzD,QAAA,GACAC,MAAA,EACAC,WAAA,KAGA8D,WAnCA,SAmCAC,GACAvE,KAAAK,OAAAmE,OAAAD,EAAA,IAEAE,SAtCA,WAsCA,IAAAC,EAAA1E,KACA,QAAAA,KAAAS,SAAA,OAAAT,KAAAqD,UAAAsB,KAAA,OAAArB,QAAA,YACA,QAAAtD,KAAAY,WAAA,OAAAZ,KAAAqD,UAAAsB,KAAA,OAAArB,QAAA,YACA,QAAAtD,KAAAa,YAAA,OAAAb,KAAAqD,UAAAsB,KAAA,OAAArB,QAAA,YACA,OAAAtD,KAAAE,OAAA0E,OAAA,OAAA5E,KAAAqD,UAAAsB,KAAA,OAAArB,QAAA,YACA,QAAAtD,KAAAU,YAAA,OAAAV,KAAAqD,UAAAsB,KAAA,OAAArB,QAAA,YACA,OAAAtD,KAAAG,WAAAyE,OAAA,OAAA5E,KAAAqD,UAAAsB,KAAA,OAAArB,QAAA,YACA,QAAAtD,KAAAK,OAAA,GAAAC,QAAA,OAAAN,KAAAqD,UAAAsB,KAAA,OAAArB,QAAA,cACA,OAAAtD,KAAAK,OAAA,GAAAE,MAAA,OAAAP,KAAAqD,UAAAsB,KAAA,OAAArB,QAAA,cACA,OAAAtD,KAAAK,OAAA,GAAAG,WAAA,OAAAR,KAAAqD,UAAAsB,KAAA,OAAArB,QAAA,cACA,QAAAtD,KAAAW,QAAA,OAAAX,KAAAqD,UAAAsB,KAAA,OAAArB,QAAA,YACA,IAAAuB,GACApE,SAAAT,KAAAS,SACAqE,UAAA9E,KAAAE,OAAA6E,KAAA,KACAC,WAAAhF,KAAAW,QACAnB,KAAAQ,KAAAa,YACAoE,KAAAjF,KAAAG,WAAA4E,KAAA,KACAG,kBAAAlF,KAAAU,YACAyE,YAAAnF,KAAAY,WACAwE,QAAApF,KAAAK,QAEAkD,QAAAC,IAAAqB,GACM5B,OAAAC,EAAA,EAAAD,CAAN4B,GAAA1B,KAAA,SAAA/B,GACA,SAAAA,EAAAgC,KAAA,OAAAsB,EAAArB,SAAAvB,MAAAV,EAAAkC,SACAC,QAAAC,IAAAC,KAAAC,MAAAC,IAAAvC,KACA,MAAAA,EAAAgC,OACAsB,EAAArB,UAAAsB,KAAA,UAAArB,QAAA,SACA+B,SAAAC,YACA1B,MAAA,SAAA9B,GACAyB,QAAAC,IAAA1B,QCrNeyD,GADEC,OAFjB,WAA0B,IAAAC,EAAAzF,KAAa0F,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,gBAA0BF,EAAA,OAAYE,YAAA,UAAoBF,EAAA,OAAYE,YAAA,UAAoBL,EAAAM,GAAA,WAAAN,EAAAM,GAAA,KAAAH,EAAA,OAA0CE,YAAA,UAAoBL,EAAAM,GAAAN,EAAAO,GAAAP,EAAArF,eAAAqF,EAAAM,GAAA,KAAAH,EAAA,OAAyDE,YAAA,UAAoBF,EAAA,OAAYE,YAAA,UAAoBL,EAAAM,GAAA,WAAAN,EAAAM,GAAA,KAAAH,EAAA,YAA+CE,YAAA,QAAAG,OAA2BC,YAAA,WAAwBC,OAAQC,MAAAX,EAAA,SAAAY,SAAA,SAAAC,GAA8Cb,EAAAhF,SAAA6F,GAAiBC,WAAA,eAAwB,GAAAd,EAAAM,GAAA,KAAAH,EAAA,OAA4BE,YAAA,UAAoBF,EAAA,OAAYE,YAAA,UAAoBL,EAAAM,GAAA,WAAAN,EAAAM,GAAA,KAAAH,EAAA,YAA+CE,YAAA,QAAAG,OAA2BC,YAAA,WAAwBC,OAAQC,MAAAX,EAAA,WAAAY,SAAA,SAAAC,GAAgDb,EAAA7E,WAAA0F,GAAmBC,WAAA,iBAA0B,GAAAd,EAAAM,GAAA,KAAAH,EAAA,OAA4BE,YAAA,UAAoBF,EAAA,OAAYE,YAAA,UAAoBL,EAAAM,GAAA,WAAAN,EAAAM,GAAA,KAAAH,EAAA,YAA+CE,YAAA,QAAAG,OAA2BC,YAAA,SAAsBC,OAAQC,MAAAX,EAAA,YAAAY,SAAA,SAAAC,GAAiDb,EAAA5E,YAAAyF,GAAoBC,WAAA,kBAA2B,GAAAd,EAAAM,GAAA,KAAAH,EAAA,OAA4BE,YAAA,UAAoBF,EAAA,OAAYE,YAAA,UAAoBL,EAAAM,GAAA,WAAAN,EAAAM,GAAA,KAAAH,EAAA,gBAAmDY,IAAI1C,eAAA2B,EAAA3B,mBAAqC,GAAA2B,EAAAM,GAAA,KAAAH,EAAA,OAA4BE,YAAA,UAAoBF,EAAA,OAAYE,YAAA,UAAoBL,EAAAM,GAAA,WAAAN,EAAAM,GAAA,KAAAH,EAAA,aAAgDK,OAAOC,YAAA,WAAwBC,OAAQC,MAAAX,EAAA,YAAAY,SAAA,SAAAC,GAAiDb,EAAA/E,YAAA4F,GAAoBC,WAAA,gBAA2Bd,EAAAgB,GAAAhB,EAAA,kBAAAiB,GAAsC,OAAAd,EAAA,aAAuBe,IAAAD,EAAAE,GAAAX,OAAmBY,MAAAH,EAAAlH,KAAA4G,MAAAM,EAAAE,QAAqC,OAAAnB,EAAAM,GAAA,KAAAH,EAAA,OAA+BE,YAAA,UAAoBF,EAAA,OAAYE,YAAA,UAAoBL,EAAAM,GAAA,UAAAN,EAAAM,GAAA,KAAAH,EAAA,OAAyCE,YAAA,QAAAgB,aAAiCC,iBAAA,WAA2BtB,EAAAgB,GAAAhB,EAAA,gBAAAiB,EAAAnC,GAA0C,OAAAqB,EAAA,OAAiBe,IAAApC,EAAAuB,YAAA,OAAAgB,aAA0CE,gBAAA,SAAuBpB,EAAA,YAAiBE,YAAA,MAAAG,OAAyBC,YAAA,QAAqBC,OAAQC,MAAAM,EAAA,QAAAL,SAAA,SAAAC,GAA8Cb,EAAAwB,KAAAP,EAAA,UAAAJ,IAA+BC,WAAA,kBAA4Bd,EAAAM,GAAA,KAAAH,EAAA,OAAwBE,YAAA,UAAoBL,EAAAM,GAAA,SAAAN,EAAAM,GAAA,KAAAH,EAAA,mBAAoDK,OAAOiB,IAAA,EAAAL,MAAA,QAAuBV,OAAQC,MAAAM,EAAA,MAAAL,SAAA,SAAAC,GAA4Cb,EAAAwB,KAAAP,EAAA,QAAAJ,IAA6BC,WAAA,gBAA0Bd,EAAAM,GAAA,KAAAH,EAAA,OAAwBE,YAAA,eAAyBL,EAAAM,GAAA,UAAAN,EAAAM,GAAA,KAAAH,EAAA,mBAAqDK,OAAOiB,IAAA,EAAAC,IAAA,IAAAN,MAAA,QAAiCV,OAAQC,MAAAM,EAAA,WAAAL,SAAA,SAAAC,GAAiDb,EAAAwB,KAAAP,EAAA,aAAAJ,IAAkCC,WAAA,qBAA+Bd,EAAAM,GAAA,KAAAH,EAAA,OAAwBE,YAAA,eAAyBL,EAAAM,GAAA,OAAAN,EAAAM,GAAA,SAAAxB,EAAAqB,EAAA,aAA0DE,YAAA,MAAAG,OAAyBtB,KAAA,WAAiB6B,IAAKY,MAAA3B,EAAApB,WAAqBoB,EAAAM,GAAA,QAAAN,EAAA4B,KAAA5B,EAAAM,GAAA,KAAAxB,EAAA,EAAAqB,EAAA,aAAkEE,YAAA,MAAAG,OAAyBtB,KAAA,UAAgB6B,IAAKY,MAAA,SAAAE,GAAyB,OAAA7B,EAAAnB,WAAAC,OAA+BkB,EAAAM,GAAA,QAAAN,EAAA4B,MAAA,KAA8B,KAAA5B,EAAAM,GAAA,KAAAH,EAAA,OAA6BE,YAAA,UAAoBF,EAAA,OAAYE,YAAA,UAAoBL,EAAAM,GAAA,WAAAN,EAAAM,GAAA,KAAAH,EAAA,gBAAmDY,IAAI1C,eAAA2B,EAAAxB,uBAAyC,GAAAwB,EAAAM,GAAA,KAAAH,EAAA,OAA4BE,YAAA,gBAA0BF,EAAA,OAAYE,YAAA,UAAoBL,EAAAM,GAAA,WAAAN,EAAAM,GAAA,KAAAH,EAAA,gBAAmD2B,IAAA,OAAAzB,YAAA,gBAAAG,OAA8CuB,QAAA/B,EAAA3E,cAA2BqF,OAAQC,MAAAX,EAAA,QAAAY,SAAA,SAAAC,GAA6Cb,EAAA9E,QAAA2F,GAAgBC,WAAA,cAAuB,GAAAd,EAAAM,GAAA,KAAAH,EAAA,OAA4BE,YAAA,UAAoBF,EAAA,OAAYE,YAAA,UAAoBL,EAAAM,GAAA,KAAAH,EAAA,aAA8BK,OAAOtB,KAAA,WAAiB6B,IAAKY,MAAA3B,EAAAhB,YAAsBgB,EAAAM,GAAA,UAAAN,EAAAM,GAAA,KAAAH,EAAA,OAAyCE,YAAA,SAAmBL,EAAAM,GAAA,wBAE5nH0B,oBCEjB,IAcAC,EAdyBC,EAAQ,OAcjCC,CACErI,EACAgG,GATF,EAXA,SAAAsC,GACEF,EAAQ,QACRA,EAAQ,SAaV,kBAEA,MAUeG,EAAA,QAAAJ,EAAiB,4FCChC7H,GACAL,KAAA,eACAuI,SAEAC,YAEAlI,KANA,WAOA,OACAmI,eAAA,GACAC,eAAA,EACAC,UAAA,EACAC,WAAAC,cAAApF,OAAAqF,EAAA,EAAArF,MAGAF,SACAwF,cADA,SACAnH,EAAAoH,GACA,OAAApH,EAAAgC,MACApD,KAAAyI,MAAA,kBACAzE,IAAA5C,EAAAtB,KAAA,GAAAkE,IACAxE,KAAA4B,EAAAtB,KAAA,GAAAN,OAEAQ,KAAAqD,SAAAtB,QAAAX,EAAAkC,SAAA,oBAEAtD,KAAAqD,SAAAvB,MAAAV,EAAAkC,SAAA,gBAGAoF,OAZA,WAYA,IAAA3I,EAAAC,KACMiD,OAAAC,EAAA,EAAAD,GAANE,KAAA,SAAA/B,GACA,SAAAA,EAAAgC,KAAA,OAAArD,EAAAsD,SAAAvB,MAAAV,EAAAkC,SACAvD,EAAAE,SAAAmB,EAAAtB,OACA8D,MAAA,SAAA9B,GACAyB,QAAAC,IAAA1B,MAGA6G,aApBA,SAoBAH,GACAjF,QAAAC,IAAAgF,IAEAI,yBAvBA,SAuBAJ,GACAxI,KAAAiI,eAAAO,EAAAxE,IACAhE,KAAAkI,eAAA,GAEAW,eA3BA,SA2BAL,GACAjF,QAAAC,IAAAgF,MCjEeM,GADEtD,OAJjB,WAA0B,IAAAC,EAAAzF,KAAa0F,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAAA,EAAA,aAAiCK,OAAO/E,OAAA,4CAAAG,QAAAoE,EAAA2C,UAAAW,aAAAtD,EAAA8C,cAAAS,YAAA,gBAAuIC,YAAAxD,EAAAyD,KAAsBvC,IAAA,OAAAwC,GAAA,SAAA5B,GAC9R,IAAAiB,EAAAjB,EAAAiB,KACA,OAAA5C,EAAA,UAAkBA,EAAA,OAAYE,YAAA,iCAAAG,OAAoDmD,IAAAZ,EAAAxE,IAAAqF,IAAA,MAAyB5D,EAAAM,GAAA,KAAAH,EAAA,QAAyBE,YAAA,iCAA2CF,EAAA,QAAaE,YAAA,+BAAAU,IAA+CY,MAAA,SAAAE,GAAyB,OAAA7B,EAAAmD,yBAAAJ,OAA4C5C,EAAA,KAAUE,YAAA,sBAA8BL,EAAAM,GAAA,KAAAN,EAAA0C,SAA6L1C,EAAA4B,KAA7LzB,EAAA,QAA2CE,YAAA,8BAAAU,IAA8CY,MAAA,SAAAE,GAAyB,OAAA7B,EAAAoD,eAAAL,OAAkC5C,EAAA,KAAUE,YAAA,uBAA+BL,EAAAM,GAAA,KAAAN,EAAA0C,SAAkM1C,EAAA4B,KAAlMzB,EAAA,QAAoDE,YAAA,8BAAAU,IAA8CY,MAAA,SAAAE,GAAyB,OAAA7B,EAAAkD,aAAAH,OAAgC5C,EAAA,KAAUE,YAAA,+BAAkDF,EAAA,KAAUE,YAAA,eAAAG,OAAkCqD,KAAA,WAAiBA,KAAA,cAAgB7D,EAAAM,GAAA,KAAAH,EAAA,aAAgCK,OAAOsD,QAAA9D,EAAAyC,eAA4B1B,IAAKgD,iBAAA,SAAAlC,GAAkC7B,EAAAyC,cAAAZ,MAA2B1B,EAAA,OAAYK,OAAOwD,MAAA,OAAAL,IAAA3D,EAAAwC,eAAAoB,IAAA,SAAkD,IAEl/B5B,oBCDjB,IAcAC,EAdyBC,EAAQ,OAcjCC,CACE/H,EACAiJ,GATF,EAVA,SAAAjB,GACEF,EAAQ,SAaV,KAEA,MAUeG,EAAA,EAAAJ,EAAiB","file":"static/js/2.7fb400af5391f49d0dd7.js","sourcesContent":["<template>\n  <div class=\"add-product\">\n    <div class=\"panel\">\n      <div class=\"title\">剩余积分：</div>\n      <div class=\"title\">{{integral}}</div>\n    </div>\n    <div class=\"panel\">\n      <div class=\"title\">店铺名称：</div>\n      <el-input class=\"input\" v-model=\"shopName\" placeholder=\"请输入店铺名称\"></el-input>\n    </div>\n    <div class=\"panel\">\n      <div class=\"title\">商品链接：</div>\n      <el-input class=\"input\" v-model=\"productUrl\" placeholder=\"请输入商品链接\"></el-input>\n    </div>\n    <div class=\"panel\">\n      <div class=\"title\">商品名称：</div>\n      <el-input class=\"input\" v-model=\"productName\" placeholder=\"请输入名称\"></el-input>\n    </div>\n    <div class=\"panel\">\n      <div class=\"title\">商品主图：</div>\n      <SingleUpload @uploadCallback=\"uploadCallback\"></SingleUpload>\n    </div>\n    <div class=\"panel\">\n      <div class=\"title\">商品分类：</div>\n      <el-select v-model=\"productType\" placeholder=\"请选择商品分类\">\n        <el-option\n          v-for=\"item in typeList\"\n          :key=\"item.id\"\n          :label=\"item.name\"\n          :value=\"item.id\">\n        </el-option>\n      </el-select>\n    </div>\n    <div class=\"panel\">\n      <div class=\"title\">SKU：</div>\n      <div class=\"panel\" style=\"flex-direction: column;\">\n        <div class=\"line\" v-for=\"(item, index) in skuArr\" :key=\"index\" style=\"margin-bottom: 5px;\">\n          <el-input class=\"sku\" v-model=\"item.skuName\" placeholder=\"单行输入\"></el-input>\n          <div class=\"price\">原价：</div>\n          <el-input-number v-model=\"item.price\" :min=\"0\" label=\"单行输入\"></el-input-number>\n          <!-- <el-input class=\"price-input\" type=\"number\" v-model=\"item.price\" placeholder=\"单行输入\"></el-input> -->\n          <div class=\"commission\">佣金率：</div>\n          <el-input-number v-model=\"item.rebateRate\" :min=\"0\" :max=\"100\" label=\"单行输入\"></el-input-number>\n          <!-- <el-input class=\"commission-input\" type=\"number\" v-model=\"item.rebateRate\" @input=\"\" placeholder=\"单行输入\"></el-input> -->\n          <div class=\"percentage\">%</div>\n          <el-button class=\"add\" type=\"primary\" @click=\"addLine\" v-if=\"index === 0\">添加</el-button>\n          <el-button class=\"add\" type=\"danger\" @click=\"removeLine(index)\" v-if=\"index > 0\">删除</el-button>\n        </div>\n      </div>\n    </div>\n    <div class=\"panel\">\n      <div class=\"title\">直播手卡：</div>\n      <SingleUpload @uploadCallback=\"uploadCardCallback\"></SingleUpload>\n    </div>\n    <div class=\"panel quill\">\n      <div class=\"title\">商品描述：</div>\n      <quill-editor ref=\"text\" v-model=\"content\" class=\"myQuillEditor\" :options=\"editorOption\" />\n    </div>\n    <div class=\"panel\">\n      <div class=\"title\"></div>\n      <el-button type=\"primary\" @click=\"handleOk\">添加商品</el-button>\n      <div class=\"tips\">添加成功将扣除5积分。</div>\n    </div>\n  </div>\n</template>\n<script>\nimport SingleUpload from '@/components/Upload/singleUpload'\nimport { quillEditor } from 'vue-quill-editor'\nimport { fetchProductType, createProduct, fetchUserInfo } from '@/api/tkpro'\nexport default {\n  name: 'addProduct',\n  components: {\n    quillEditor,\n    SingleUpload\n  },\n  data() {\n    return {\n      typeList: [],\n      imgUrl: [],\n      cardImgUrl: [],\n      integral: 0,\n      skuArr: [{\n        skuName: '',\n        price: 0,\n        rebateRate: 0,\n      }],\n      shopName: '',\n      productType: '',\n      content: '',\n      productUrl: '',\n      productName: '',\n      editorOption: {\n        modules: {\n          ImageExtend: {\n            // 如果不作设置，即{}  则依然开启复制粘贴功能且以base64插入\n            name: \"file\", // 图片参数名\n            size: 3, // 可选参数 图片大小，单位为M，1M = 1024kb\n            action: \"/res/imgUpload\", // 服务器地址, 如果action为空，则采用base64插入图片\n            // response 为一个函数用来获取服务器返回的具体图片地址\n            // 例如服务器返回{code: 200; data:{ url: 'baidu.com'}}\n            // 则 return res.data.url\n            response: res => {\n            return res.data;\n            },\n            headers: xhr => {\n            // 上传图片请求需要携带token的 在xhr.setRequestHeader中设置\n            xhr.setRequestHeader(\n                \"Authorization\",\n                this.getCookie(\"username\")\n                ? this.getCookie(\"username\").token_type +\n                    this.getCookie(\"username\").access_token\n                : \"Basic emh4eTp6aHh5\"\n            );\n            }, // 可选参数 设置请求头部\n            sizeError: () => {}, // 图片超过大小的回调\n            start: () => {}, // 可选参数 自定义开始上传触发事件\n            end: () => {}, // 可选参数 自定义上传结束触发的事件，无论成功或者失败\n            error: () => {}, // 可选参数 上传失败触发的事件\n            success: () => {}, // 可选参数  上传成功触发的事件\n            change: (xhr, formData) => {\n            // xhr.setRequestHeader('myHeader','myValue')\n            // formData.append('token', 'myToken')\n            } // 可选参数 每次选择图片触发，也可用来设置头部，但比headers多了一个参数，可设置formData\n          },\n          toolbar:{\n            container:[\n              ['bold', 'italic', 'underline', 'strike'],        //加粗，斜体，下划线，删除线\n              ['blockquote', 'code-block'],         //引用，代码块\n              [{ 'header': 1 }, { 'header': 2 }],               // 标题，键值对的形式；1、2表示字体大小\n              [{ 'list': 'ordered'}, { 'list': 'bullet' }],          //列表\n              [{ 'script': 'sub'}, { 'script': 'super' }],      // 上下标\n              [{ 'indent': '-1'}, { 'indent': '+1' }],          // 缩进\n              [{ 'direction': 'rtl' }],                         // 文本方向\n              [{ 'size': ['small', false, 'large', 'huge'] }],  // 字体大小\n              [{ 'header': [1, 2, 3, 4, 5, 6, false] }],         //几级标题\n              [{ 'color': [] }, { 'background': [] }],          // 字体颜色，字体背景颜色\n              [{ 'font': [] }],         //字体\n              [{ 'align': [] }],        //对齐方式\n              ['clean'],        //清除字体样式\n              ['image','video']        //上传图片、上传视频\n            ]\n          }\n        },\n      },\n    }\n  },\n  created(){\n    this.loadData()\n  },\n  methods:{\n    loadData () {\n      fetchProductType().then(res => {\n        if (res.code !== 200) return this.$message.error(res.message);\n        this.typeList = res.data\n        console.log(JSON.parse(JSON.stringify(this.typeList)));\n      }).catch(error => {\n        console.log(error);\n      })\n      fetchUserInfo('stormfa').then(res => {\n        if (res.code !== 200) return this.$message.error(res.message);\n        this.integral = res.data.rewardPoint\n        console.log(this.integral);\n      }).catch(error => {\n        console.log(error);\n      })\n    },\n    uploadCallback (data) { // 商品主图\n      this.imgUrl.push(data.url)\n      console.log(this.imgUrl);\n    },\n    uploadCardCallback (data) { // 上传直播手卡\n      this.cardImgUrl.push(data.url)\n      console.log(this.cardImgUrl);\n    },\n    addGoods () {\n      this.$router.push({path:'/pms/addProduct'});\n    },\n    addLine () {\n      this.skuArr.push({\n        skuName: '',\n        price: 0,\n        rebateRate: 0,\n      })\n    },\n    removeLine (index) {\n      this.skuArr.splice(index, 1)\n    },\n    handleOk () {\n      if (this.shopName === '') return this.$message({ type: 'info', message: `未输入店铺名称` });\n      if (this.productUrl === '') return this.$message({ type: 'info', message: `未输入商品链接` });\n      if (this.productName === '') return this.$message({ type: 'info', message: `未输入商品名称` });\n      if (this.imgUrl.length === 0) return this.$message({ type: 'info', message: `未添加商品主图` });\n      if (this.productType === '') return this.$message({ type: 'info', message: `未选择商品分类` });\n      if (this.cardImgUrl.length === 0) return this.$message({ type: 'info', message: `未添加直播手卡` });\n      if (this.skuArr[0].skuName === '') return this.$message({ type: 'info', message: `未输入SKU的描述` });\n      if (this.skuArr[0].price === 0) return this.$message({ type: 'info', message: `未输入SKU的原价` });\n      if (this.skuArr[0].rebateRate === 0) return this.$message({ type: 'info', message: `未输入SKU的佣金` });\n      if (this.content === '') return this.$message({ type: 'info', message: `未输入商品描述` });\n      const input = {\n        \"shopName\": this.shopName,\n        \"albumPics\": this.imgUrl.join(','),\n        \"detailHtml\": this.content,\n        \"name\": this.productName,\n        \"pics\": this.cardImgUrl.join(','),\n        \"productCategoryId\": this.productType,\n        \"productLink\": this.productUrl,\n        \"skuList\": this.skuArr\n      }\n      console.log(input);\n      createProduct(input).then(res => {\n        if (res.code !== 200) return this.$message.error(res.message);\n        console.log(JSON.parse(JSON.stringify(res)));\n        if (res.code !== 200) return\n        this.$message({ type: 'success', message: `操作成功` });\n        location.reload()\n      }).catch(error => {\n        console.log(error);\n      })\n    },\n  }\n}\n</script>\n<style rel=\"stylesheet/scss\" lang=\"scss\" scoped>\n.add-product {\n  background: #eeeeee;\n  padding: 20px;\n  .panel {\n    margin-bottom: 20px;\n    display: flex;\n    .title {\n      width: 90px;\n      line-height: 33px;\n    }\n    .input {\n      width: 400px;\n    }\n    .tips {\n      padding: 10px;\n    }\n    .myQuillEditor {\n      height: 200px;\n      background: #ffffff;\n    }\n    .line {\n      display: flex;\n      flex-direction: row;\n      width: 100%;\n      align-items: center;\n      .sku {\n        width: 22%;\n      }\n      .price {\n        width: 7%;\n        padding-left: 5px;\n      }\n      .price-input {\n        width: 25%;\n      }\n      .commission {\n        width: 7%;\n        padding-left: 5px;\n      }\n      .commission-input {\n        width: 10%;\n      }\n      .percentage {\n        width: 4%;\n        padding-left: 5px;\n      }\n      .add {\n\n      }\n      .delete {\n        color: #ff0000;\n        cursor: pointer;\n      }\n    }\n  }\n  .quill {\n    height: 280px;\n  }\n}\n</style>\n<style>\n.ql-editor {\n  background: #ffffff!important;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/pms/product/add.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"add-product\"},[_c('div',{staticClass:\"panel\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"剩余积分：\")]),_vm._v(\" \"),_c('div',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.integral))])]),_vm._v(\" \"),_c('div',{staticClass:\"panel\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"店铺名称：\")]),_vm._v(\" \"),_c('el-input',{staticClass:\"input\",attrs:{\"placeholder\":\"请输入店铺名称\"},model:{value:(_vm.shopName),callback:function ($$v) {_vm.shopName=$$v},expression:\"shopName\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"panel\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"商品链接：\")]),_vm._v(\" \"),_c('el-input',{staticClass:\"input\",attrs:{\"placeholder\":\"请输入商品链接\"},model:{value:(_vm.productUrl),callback:function ($$v) {_vm.productUrl=$$v},expression:\"productUrl\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"panel\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"商品名称：\")]),_vm._v(\" \"),_c('el-input',{staticClass:\"input\",attrs:{\"placeholder\":\"请输入名称\"},model:{value:(_vm.productName),callback:function ($$v) {_vm.productName=$$v},expression:\"productName\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"panel\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"商品主图：\")]),_vm._v(\" \"),_c('SingleUpload',{on:{\"uploadCallback\":_vm.uploadCallback}})],1),_vm._v(\" \"),_c('div',{staticClass:\"panel\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"商品分类：\")]),_vm._v(\" \"),_c('el-select',{attrs:{\"placeholder\":\"请选择商品分类\"},model:{value:(_vm.productType),callback:function ($$v) {_vm.productType=$$v},expression:\"productType\"}},_vm._l((_vm.typeList),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.name,\"value\":item.id}})}),1)],1),_vm._v(\" \"),_c('div',{staticClass:\"panel\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"SKU：\")]),_vm._v(\" \"),_c('div',{staticClass:\"panel\",staticStyle:{\"flex-direction\":\"column\"}},_vm._l((_vm.skuArr),function(item,index){return _c('div',{key:index,staticClass:\"line\",staticStyle:{\"margin-bottom\":\"5px\"}},[_c('el-input',{staticClass:\"sku\",attrs:{\"placeholder\":\"单行输入\"},model:{value:(item.skuName),callback:function ($$v) {_vm.$set(item, \"skuName\", $$v)},expression:\"item.skuName\"}}),_vm._v(\" \"),_c('div',{staticClass:\"price\"},[_vm._v(\"原价：\")]),_vm._v(\" \"),_c('el-input-number',{attrs:{\"min\":0,\"label\":\"单行输入\"},model:{value:(item.price),callback:function ($$v) {_vm.$set(item, \"price\", $$v)},expression:\"item.price\"}}),_vm._v(\" \"),_c('div',{staticClass:\"commission\"},[_vm._v(\"佣金率：\")]),_vm._v(\" \"),_c('el-input-number',{attrs:{\"min\":0,\"max\":100,\"label\":\"单行输入\"},model:{value:(item.rebateRate),callback:function ($$v) {_vm.$set(item, \"rebateRate\", $$v)},expression:\"item.rebateRate\"}}),_vm._v(\" \"),_c('div',{staticClass:\"percentage\"},[_vm._v(\"%\")]),_vm._v(\" \"),(index === 0)?_c('el-button',{staticClass:\"add\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.addLine}},[_vm._v(\"添加\")]):_vm._e(),_vm._v(\" \"),(index > 0)?_c('el-button',{staticClass:\"add\",attrs:{\"type\":\"danger\"},on:{\"click\":function($event){return _vm.removeLine(index)}}},[_vm._v(\"删除\")]):_vm._e()],1)}),0)]),_vm._v(\" \"),_c('div',{staticClass:\"panel\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"直播手卡：\")]),_vm._v(\" \"),_c('SingleUpload',{on:{\"uploadCallback\":_vm.uploadCardCallback}})],1),_vm._v(\" \"),_c('div',{staticClass:\"panel quill\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"商品描述：\")]),_vm._v(\" \"),_c('quill-editor',{ref:\"text\",staticClass:\"myQuillEditor\",attrs:{\"options\":_vm.editorOption},model:{value:(_vm.content),callback:function ($$v) {_vm.content=$$v},expression:\"content\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"panel\"},[_c('div',{staticClass:\"title\"}),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleOk}},[_vm._v(\"添加商品\")]),_vm._v(\" \"),_c('div',{staticClass:\"tips\"},[_vm._v(\"添加成功将扣除5积分。\")])],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-20f694e2\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/pms/product/add.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-20f694e2\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./add.vue\")\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-20f694e2\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=1!./add.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./add.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./add.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-20f694e2\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./add.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-20f694e2\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/pms/product/add.vue\n// module id = null\n// module chunks = ","<template>\n  <div>\n    <el-upload action=\"https://tuan.taokepro.cn/minio/img/upload\" :headers=\"myHeaders\" :on-success=\"handleSuccess\" list-type=\"picture-card\">\n      <i slot=\"default\" class=\"el-icon-plus\"></i>\n      <div slot=\"file\" slot-scope=\"{file}\">\n        <img class=\"el-upload-list__item-thumbnail\" :src=\"file.url\" alt=\"\" >\n        <span class=\"el-upload-list__item-actions\">\n          <span class=\"el-upload-list__item-preview\" @click=\"handlePictureCardPreview(file)\">\n            <i class=\"el-icon-zoom-in\"></i>\n          </span>\n          <span v-if=\"!disabled\" class=\"el-upload-list__item-delete\" @click=\"handleDownload(file)\">\n            <i class=\"el-icon-download\"></i>\n          </span>\n          <span v-if=\"!disabled\" class=\"el-upload-list__item-delete\" @click=\"handleRemove(file)\">\n            <i class=\"el-icon-delete\"></i>\n          </span>\n        </span>\n      </div>\n    </el-upload>\n    <el-dialog :visible.sync=\"dialogVisible\">\n      <img width=\"100%\" :src=\"dialogImageUrl\" alt=\"\">\n    </el-dialog>\n  </div>\n</template>\n<script>\n\nimport { uploadImg } from '@/api/tkpro'\nimport { getToken } from '@/utils/auth'\nexport default {\n  name: 'singleUpload',\n  props: {\n  },\n  computed: {\n  },\n  data() {\n    return {\n      dialogImageUrl: '',\n      dialogVisible: false,\n      disabled: false,\n      myHeaders: {Authorization: getToken()}\n    };\n  },\n  methods: {\n    handleSuccess(res, file) { // action 上传时的回调\n      if (res.code == '200') {\n        this.$emit('uploadCallback', {\n          url: res.data[0].url,\n          name: res.data[0].name\n        })\n        this.$message.success(res.message || '文件导入成功，稍后查询处理结果');\n      } else {\n        this.$message.error(res.message || '文件导入失败，稍后重试');\n      }\n    },\n    upload () {\n      uploadImg().then(res => {\n        if (res.code !== 200) return this.$message.error(res.message);\n        this.typeList = res.data\n      }).catch(error => {\n        console.log(error);\n      })\n    },\n    handleRemove(file) {\n      console.log(file);\n    },\n    handlePictureCardPreview(file) {\n      this.dialogImageUrl = file.url;\n      this.dialogVisible = true;\n    },\n    handleDownload(file) {\n      console.log(file);\n    },\n\n  }\n}\n</script>\n<style>\n\n</style>\n\n\n\n\n\n// WEBPACK FOOTER //\n// src/components/Upload/singleUpload.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-upload',{attrs:{\"action\":\"https://tuan.taokepro.cn/minio/img/upload\",\"headers\":_vm.myHeaders,\"on-success\":_vm.handleSuccess,\"list-type\":\"picture-card\"},scopedSlots:_vm._u([{key:\"file\",fn:function(ref){\nvar file = ref.file;\nreturn _c('div',{},[_c('img',{staticClass:\"el-upload-list__item-thumbnail\",attrs:{\"src\":file.url,\"alt\":\"\"}}),_vm._v(\" \"),_c('span',{staticClass:\"el-upload-list__item-actions\"},[_c('span',{staticClass:\"el-upload-list__item-preview\",on:{\"click\":function($event){return _vm.handlePictureCardPreview(file)}}},[_c('i',{staticClass:\"el-icon-zoom-in\"})]),_vm._v(\" \"),(!_vm.disabled)?_c('span',{staticClass:\"el-upload-list__item-delete\",on:{\"click\":function($event){return _vm.handleDownload(file)}}},[_c('i',{staticClass:\"el-icon-download\"})]):_vm._e(),_vm._v(\" \"),(!_vm.disabled)?_c('span',{staticClass:\"el-upload-list__item-delete\",on:{\"click\":function($event){return _vm.handleRemove(file)}}},[_c('i',{staticClass:\"el-icon-delete\"})]):_vm._e()])])}}])},[_c('i',{staticClass:\"el-icon-plus\",attrs:{\"slot\":\"default\"},slot:\"default\"})]),_vm._v(\" \"),_c('el-dialog',{attrs:{\"visible\":_vm.dialogVisible},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('img',{attrs:{\"width\":\"100%\",\"src\":_vm.dialogImageUrl,\"alt\":\"\"}})])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-21db4f4e\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Upload/singleUpload.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-21db4f4e\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./singleUpload.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./singleUpload.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./singleUpload.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-21db4f4e\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./singleUpload.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Upload/singleUpload.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}