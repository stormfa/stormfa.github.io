{"version":3,"sources":["webpack:///src/views/account/information.vue","webpack:///./src/views/account/information.vue?b69b","webpack:///./src/views/account/information.vue"],"names":["information","name","components","data","id","loading","fileList","username","headIcon","intro","myHeaders","Authorization","Object","auth","goodAt","isSelected","created","this","loadData","methods","_this","tkpro","then","res","code","$message","error","message","skilledDomain","split","map","item","includes","catch","console","log","changeGoodAt","aIndex","index","handleSuccess","file","url","success","updateData","_this2","type","length","forEach","push","input","nickname","join","account_information","render","_vm","_h","$createElement","_c","_self","directives","rawName","value","expression","staticClass","_v","attrs","src","_e","show-file-list","action","headers","on-success","limit","size","slot","placeholder","model","callback","$$v","cols","rows","domProps","on","$event","target","composing","_l","key","class","cell-selected","click","_s","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/3.5215583d1c34bd90bf6b.js","sourcesContent":["<template>\n  <div class=\"information-list\" v-loading=\"loading\">\n    <div class=\"panel\">\n      <div class=\"title\">头像：</div>\n      <img :src=\"headIcon\" v-if=\"headIcon\">\n      <el-upload\n        class=\"upload-demo\"\n        :show-file-list=\"false\"\n        action=\"https://tuan.taokepro.cn/minio/img/upload\"\n        :headers=\"myHeaders\"\n        :on-success=\"handleSuccess\"\n        :limit=\"1\">\n        <el-button size=\"small\" type=\"primary\">点击上传</el-button>\n        <div slot=\"tip\" class=\"el-upload__tip\">只能上传jpg/png文件，且不超过500kb</div>\n      </el-upload>\n    </div>\n    <div class=\"panel\">\n      <div class=\"title\">用户昵称：</div>\n      <el-input class=\"input\" v-model=\"username\" placeholder=\"请输入用户昵称\"></el-input>\n    </div>\n    <div class=\"panel\">\n      <div class=\"title\">自我介绍：</div>\n      <textarea name=\"\" v-model=\"intro\" id=\"\" cols=\"50\" rows=\"5\"></textarea>\n    </div>\n    <div class=\"panel\">\n      <div class=\"title\">擅长领域：</div>\n      <div class=\"type\">\n        <div class=\"cell\"\n          :class=\"{ 'cell-selected': item.isSelected }\"\n          @click=\"changeGoodAt(index)\"\n          v-for=\"(item, index) in goodAt\"\n          :key=\"index\">{{item.name}}</div>\n      </div>\n    </div>\n    <div class=\"button\" @click=\"updateData\">确认并保存</div>\n  </div>\n</template>\n\n<script>\nimport { getToken } from '@/utils/auth'\nimport { fetchUserInfo, updateUserInfo } from '@/api/tkpro'\nexport default {\n  name: 'information-list',\n  components: {\n  },\n  data() {\n    return {\n      id: 0,\n      loading: false,\n      fileList: [],\n      username: '',\n      headIcon: '',\n      intro: '',\n      myHeaders: {Authorization: getToken()},\n      goodAt: [{\n        'name': '美妆',\n        'isSelected': false\n      }, {\n        'name': '生活',\n        'isSelected': false\n      }, {\n        'name': '美食',\n        'isSelected': false\n      }, {\n        'name': '娱乐',\n        'isSelected': false\n      }, {\n        'name': '户外',\n        'isSelected': false\n      }, {\n        'name': '宠物',\n        'isSelected': false\n      }, {\n        'name': '直播',\n        'isSelected': false\n      }, {\n        'name': '卖衣服',\n        'isSelected': false\n      }],\n    }\n  },\n  created() {\n    this.loadData()\n  },\n  methods:{\n    loadData () {\n      this.loading = true\n      fetchUserInfo('stormfa').then(res => {\n        if (res.code !== 200) return this.$message.error(res.message);\n        this.id = res.data.id\n        this.username = res.data.username\n        this.intro = res.data.intro\n        const skilledDomain = res.data.skilledDomain.split(',')\n        this.goodAt.map(item => {\n          item.isSelected = false\n          if (skilledDomain.includes(item.name)) item.isSelected = true\n          return item\n        })\n        this.headIcon = res.data.headIcon\n        this.loading = false\n      }).catch(error => {\n        console.log(error);\n        this.loading = false\n      })\n    },\n    changeGoodAt (aIndex) {\n      this.goodAt.map((item, index) => {\n        if (index === aIndex) item.isSelected = !item.isSelected\n        return item\n      })\n    },\n    handleSuccess(res, file) { // action 上传时的回调\n      if (res.code == '200') {\n        this.headIcon = res.data[0].url\n        this.$message.success(res.message || '文件导入成功，稍后查询处理结果');\n      } else {\n        this.$message.error(res.message || '文件导入失败，稍后重试');\n      }\n    },\n    updateData () {\n      if (this.headIcon === '') return this.$message({ type: 'info', message: `未选择头像` });\n      if (this.username === '') return this.$message({ type: 'info', message: `未输入用户昵称` });\n      if (this.intro === '') return this.$message({ type: 'info', message: `未输入自我介绍` });\n      if (this.goodAt.length === 0) return this.$message({ type: 'info', message: `未选择擅长领域` });\n\n      const goodAt = []\n      this.goodAt.forEach(item => {\n        if (item.isSelected) goodAt.push(item.name)\n      })\n      const input = {\n      \t\"headIcon\": this.headIcon,\n        \"intro\": this.intro,\n        \"nickname\": this.username,\n        \"skilledDomain\": goodAt.join(',')\n      }\n      updateUserInfo('stormfa', input).then(res => {\n        if (res.code !== 200) return\n        this.$message.success('操作成功');\n        this.loadData()\n      }).catch(error => {\n        console.log(error);\n      })\n\n    },\n  }\n}\n</script>\n\n<style rel=\"stylesheet/scss\" lang=\"scss\" scoped>\n.information-list {\n  background: #eeeeee;\n  padding: 20px;\n  .panel {\n    margin-bottom: 20px;\n    display: flex;\n    img {\n      width: 150px;\n      height: 150px;\n    }\n    .upload-demo {\n      margin: 30px;\n    }\n    .title {\n      width: 90px;\n      line-height: 33px;\n    }\n    .input {\n      width: 400px;\n    }\n    .type {\n      display: flex;\n      flex-direction: row;\n      flex-wrap: wrap;\n      width: 370px;\n      .cell {\n        width: 80px;\n        height: 30px;\n        border-radius: 4px;\n        background-color: rgba(255, 255, 255, 100);\n        color: rgba(16, 16, 16, 100);\n        font-size: 14px;\n        text-align: center;\n        border: 1px solid rgba(187, 187, 187, 100);\n        margin: 0 20px 17px 20px;\n        line-height: 28px;\n        cursor: pointer;\n      }\n      .cell-selected {\n        color: #031FBB;\n        font-weight: bold;\n      }\n    }\n  }\n  .button {\n    width: 358px;\n    height: 48px;\n    border-radius: 4px;\n    background-color: rgba(164, 173, 179, 100);\n    color: rgba(255, 255, 255, 100);\n    font-size: 14px;\n    text-align: center;\n    line-height: 48px;\n    cursor: pointer;\n  }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/account/information.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"information-list\"},[_c('div',{staticClass:\"panel\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"头像：\")]),_vm._v(\" \"),(_vm.headIcon)?_c('img',{attrs:{\"src\":_vm.headIcon}}):_vm._e(),_vm._v(\" \"),_c('el-upload',{staticClass:\"upload-demo\",attrs:{\"show-file-list\":false,\"action\":\"https://tuan.taokepro.cn/minio/img/upload\",\"headers\":_vm.myHeaders,\"on-success\":_vm.handleSuccess,\"limit\":1}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"}},[_vm._v(\"点击上传\")]),_vm._v(\" \"),_c('div',{staticClass:\"el-upload__tip\",attrs:{\"slot\":\"tip\"},slot:\"tip\"},[_vm._v(\"只能上传jpg/png文件，且不超过500kb\")])],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"panel\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"用户昵称：\")]),_vm._v(\" \"),_c('el-input',{staticClass:\"input\",attrs:{\"placeholder\":\"请输入用户昵称\"},model:{value:(_vm.username),callback:function ($$v) {_vm.username=$$v},expression:\"username\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"panel\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"自我介绍：\")]),_vm._v(\" \"),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.intro),expression:\"intro\"}],attrs:{\"name\":\"\",\"id\":\"\",\"cols\":\"50\",\"rows\":\"5\"},domProps:{\"value\":(_vm.intro)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.intro=$event.target.value}}})]),_vm._v(\" \"),_c('div',{staticClass:\"panel\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"擅长领域：\")]),_vm._v(\" \"),_c('div',{staticClass:\"type\"},_vm._l((_vm.goodAt),function(item,index){return _c('div',{key:index,staticClass:\"cell\",class:{ 'cell-selected': item.isSelected },on:{\"click\":function($event){return _vm.changeGoodAt(index)}}},[_vm._v(_vm._s(item.name))])}),0)]),_vm._v(\" \"),_c('div',{staticClass:\"button\",on:{\"click\":_vm.updateData}},[_vm._v(\"确认并保存\")])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-79d925cf\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/account/information.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-79d925cf\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./information.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./information.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./information.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-79d925cf\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./information.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-79d925cf\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/account/information.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}