webpackJsonp([9],{KR8f:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("mvHQ"),i=a.n(s),r=a("jA3A"),n={name:"home",data:function(){return{keyword:"",loading:!1,currentPage:1,pageSize:10,total:0,productCategoryId:0,dataArray:[],typeList:[],sort:0,order:"asc"}},created:function(){this.currentPage=1,this.loadType(),this.loadData()},methods:{handleSizeChange:function(t){console.log("每页 "+t+" 条")},handleCurrentChange:function(t){this.currentPage=t,this.loadData(),console.log("当前页: "+t)},loadType:function(){var t=this;Object(r.j)().then(function(e){if(200!==e.code)return t.$message.error(e.message);t.typeList=e.data.map(function(t){return t.isSelected=!1,t}),console.log(JSON.parse(i()(t.typeList)))}).catch(function(t){console.log(t)})},loadData:function(){var t=this;this.loading=!0;var e=0===this.productCategoryId?"":this.productCategoryId,a=0===this.sort?"":this.sort;Object(r.i)(e,this.keyWord,this.order,a,this.currentPage).then(function(e){t.dataArray=e.data.list,t.total=e.data.total,t.loading=!1}).catch(function(e){console.log(e),t.loading=!1})},handleSearch:function(){var t=this;this.productCategoryId=0,this.typeList.forEach(function(t){return t.isSelected=!1}),this.sort=-1,this.order=-1,this.dataArray=[],Object(r.q)(this.keyword).then(function(e){if(200!==e.code)return t.$message.error(e.message);t.dataArray=e.data,t.total=t.dataArray.length,t.loading=!1}).catch(function(e){console.log(e),t.loading=!1})},chooseType:function(t,e){console.log(e),this.keyword="",this.sort=-1,this.order=-1,this.typeList.forEach(function(t,a){t.isSelected=a===e}),this.productCategoryId=t.id,this.loadData()},handleSort:function(t){this.keyword="",this.productCategoryId=0,this.typeList.forEach(function(t){return t.isSelected=!1}),this.sort===t&&(this.order="asc"===this.order?"desc":"asc"),this.sort=t,this.loadData()},goDetail:function(t){this.$router.push({path:"/detail",query:{id:t.id}})}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home"},[a("div",{staticClass:"search-panel"},[a("el-input",{staticClass:"input",attrs:{placeholder:"请输入商品关键词"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleSearch.apply(null,arguments)}},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}),t._v(" "),a("div",{staticClass:"search",on:{click:t.handleSearch}},[t._v("搜索")])],1),t._v(" "),a("div",{staticClass:"filter"},[a("div",{staticClass:"title"},[t._v("类目")]),t._v(" "),t._l(t.typeList,function(e,s){return a("div",{key:s,staticClass:"item",class:{"item-selected":e.isSelected},on:{click:function(a){return t.chooseType(e,s)}}},[t._v("\n      "+t._s(e.name)+"\n    ")])})],2),t._v(" "),a("div",{staticClass:"filter"},[a("div",{staticClass:"title"},[t._v("排序")]),t._v(" "),a("div",{staticClass:"item",class:{"item-selected":1===t.sort},on:{click:function(e){return t.handleSort(1)}}},[t._v("\n      按佣金"+t._s(1===t.sort?"asc"===t.order?"(↑)":"(↓)":"")+"\n    ")]),t._v(" "),a("div",{staticClass:"item",class:{"item-selected":2===t.sort},on:{click:function(e){return t.handleSort(2)}}},[t._v("\n      按价格"+t._s(2===t.sort?"asc"===t.order?"(↑)":"(↓)":"")+"\n    ")]),t._v(" "),a("div",{staticClass:"item",class:{"item-selected":3===t.sort},on:{click:function(e){return t.handleSort(3)}}},[t._v("\n      最新上架"+t._s(3===t.sort?"asc"===t.order?"(↑)":"(↓)":"")+"\n    ")])]),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"goods-panel"},t._l(t.dataArray,function(e,s){return a("div",{key:s,staticClass:"item",on:{click:function(a){return t.goDetail(e)}}},[a("img",{attrs:{src:e.albumPics}}),t._v(" "),a("div",{staticClass:"title",attrs:{title:e.name}},[t._v(t._s(e.name))]),t._v(" "),a("div",{staticClass:"value"},[a("div",{staticClass:"left",attrs:{title:e.price+"元"}},[t._v(t._s(e.price)+"元")]),t._v(" "),a("div",{staticClass:"right",attrs:{title:e.rebateRate+"%"}},[t._v(t._s(e.rebateRate)+"%")])]),t._v(" "),t._m(0,!0)])}),0),t._v(" "),a("el-pagination",{attrs:{background:"",layout:"->, prev, pager, next","current-page":t.currentPage,"page-size":t.pageSize,total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}}})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"label"},[e("div",{staticClass:"left"},[this._v("券后价")]),this._v(" "),e("div",{staticClass:"right"},[this._v("佣金率")])])}]};var c=a("VU/8")(n,o,!1,function(t){a("PNZ6")},"data-v-6f254d42",null);e.default=c.exports},PNZ6:function(t,e){}});
//# sourceMappingURL=9.a5adf85d7653c624be50.js.map