webpackJsonp([3],{gEzv:function(t,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=s("jA3A"),i={name:"product-list",data:function(){return{publishStatus:-1,loading:!1,integral:0,datePicker:[],productName:"",currentPage:1,pageSize:10,total:0,dataArray:[]}},created:function(){this.loadData(),this.loadIntegral()},methods:{loadData:function(){var t=this;this.loading=!0;var a=this.datePicker&&this.datePicker.length>1?new Date(this.datePicker[0]).format():"",s=this.datePicker&&this.datePicker.length>1?new Date(this.datePicker[1]).format():"",i=-1===this.publishStatus?"":this.publishStatus;Object(e.h)(this.productName,a,s,i,this.currentPage).then(function(a){t.dataArray=a.data.list,t.total=a.data.total,t.loading=!1}).catch(function(a){console.log(a),t.loading=!1})},loadIntegral:function(){var t=this;Object(e.k)("stormfa").then(function(a){if(200!==a.code)return t.$message.error(a.message);t.integral=a.data.rewardPoint,console.log(t.integral)}).catch(function(t){console.log(t)})},changePublishStatus:function(t){this.publishStatus!==t&&(this.publishStatus=t,this.loadData())},putOnPublish:function(t){var a=this,s={ids:[t.id],publishStatus:1};Object(e.u)(s).then(function(t){if(200!==t.code)return a.$message.error(t.message);a.$message({type:"success",message:"操作成功"}),a.loadData()}).catch(function(t){console.log(t)})},putOffPublish:function(t){var a=this,s={ids:[t.id],publishStatus:0};Object(e.u)(s).then(function(t){if(200!==t.code)return a.$message.error(t.message);a.$message({type:"success",message:"操作成功"}),a.loadData()}).catch(function(t){console.log(t)})},handleSizeChange:function(t){console.log("每页 "+t+" 条")},handleCurrentChange:function(t){this.currentPage=t,this.loadData(),console.log("当前页: "+t)},addGoods:function(){this.$router.push({path:"/pms/addProduct"})},handleDelete:function(t){var a=this;this.$alert("您确认删除吗？","提示",{confirmButtonText:"确定",callback:function(s){if(console.log(s),"cancel"!==s){var i={ids:[t.id]};console.log(i),Object(e.s)(i).then(function(t){if(200!==t.code)return a.$message.error(t.message);console.log(t),a.$message({type:"success",message:"删除成功"}),a.loadData()}).catch(function(t){console.log(t)})}}})}}},n={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"product-list"},[s("div",{staticClass:"search-panel"},[s("div",{staticClass:"cell"},[s("div",{staticClass:"input-title"},[t._v("产品名称")]),t._v(" "),s("el-input",{staticClass:"input",attrs:{placeholder:"输入产品名称"},model:{value:t.productName,callback:function(a){t.productName=a},expression:"productName"}})],1),t._v(" "),s("div",{staticClass:"cell"},[s("div",{staticClass:"input-title"},[t._v("添加时间")]),t._v(" "),s("el-date-picker",{attrs:{type:"daterange","range-separator":"至",format:"yyyy-MM-dd HH:mm:ss","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.datePicker,callback:function(a){t.datePicker=a},expression:"datePicker"}})],1),t._v(" "),s("div",{staticClass:"search",on:{click:t.loadData}},[t._v("查询")]),t._v(" "),s("div",{staticClass:"empty"}),t._v(" "),s("div",{staticClass:"add-goods",on:{click:t.addGoods}},[t._v("添加商品")]),t._v(" "),s("div",{staticClass:"integral"},[t._v("剩余积分："+t._s(t.integral))])]),t._v(" "),s("div",{staticClass:"filter"},[s("div",{staticClass:"condition",class:{"condition-selected":-1===t.publishStatus},on:{click:function(a){return t.changePublishStatus(-1)}}},[t._v("全部")]),t._v(" "),s("div",{staticClass:"condition",class:{"condition-selected":1===t.publishStatus},on:{click:function(a){return t.changePublishStatus(1)}}},[t._v("已上架")]),t._v(" "),s("div",{staticClass:"condition",class:{"condition-selected":0===t.publishStatus},on:{click:function(a){return t.changePublishStatus(0)}}},[t._v("已下架")])]),t._v(" "),t._m(0),t._v(" "),t._l(t.dataArray,function(a,e){return s("div",{key:e,staticClass:"goods-panel"},[s("div",{staticClass:"main"},[s("img",{attrs:{src:a.albumPics,alt:""}}),t._v(" "),s("div",{staticClass:"info"},[s("div",{staticClass:"name"},[t._v(t._s(a.name))]),t._v(" "),s("div",{staticClass:"goods-id"},[t._v("商品ID："+t._s(a.id))]),t._v(" "),s("div",{staticClass:"shop"},[t._v("店铺："+t._s(a.shopName))])])]),t._v(" "),s("div",{staticClass:"price"},[t._v("￥159")]),t._v(" "),s("div",{staticClass:"commission-rate"},[t._v("17%")]),t._v(" "),s("div",{staticClass:"operation"},[0===a.publishStatus?s("div",{staticClass:"but put",on:{click:function(s){return t.putOnPublish(a)}}},[t._v("上架")]):s("div",{staticClass:"but off",on:{click:function(s){return t.putOffPublish(a)}}},[t._v("下架")]),t._v(" "),s("div",{staticClass:"but edit"},[t._v("编辑")]),t._v(" "),s("div",{staticClass:"but delete",on:{click:function(s){return t.handleDelete(a)}}},[t._v("删除")])])])}),t._v(" "),s("el-pagination",{attrs:{background:"",layout:"->, prev, pager, next","current-page":t.currentPage,"page-size":t.pageSize,total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(a){t.currentPage=a},"update:current-page":function(a){t.currentPage=a}}})],2)},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"goods-panel",staticStyle:{"margin-bottom":"9px"}},[a("div",{staticClass:"main"},[this._v("商品信息")]),this._v(" "),a("div",{staticClass:"price"},[this._v("价格")]),this._v(" "),a("div",{staticClass:"commission-rate"},[this._v("佣金率")]),this._v(" "),a("div",{staticClass:"operation"},[this._v("操作")])])}]};var c=s("VU/8")(i,n,!1,function(t){s("lTxB")},"data-v-43a1c098",null);a.default=c.exports},lTxB:function(t,a){}});
//# sourceMappingURL=3.c6e68b2a46552be01ba9.js.map