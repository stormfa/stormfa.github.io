webpackJsonp([7],{"6ozE":function(e,o,t){e.exports=t.p+"static/img/welcome.e573d39.png"},IILt:function(e,o){},"T+/8":function(e,o,t){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=t("iG/G"),i=t("oTkS");var s=t("6ozE"),r=t.n(s),a=t("lbHh"),l=t.n(a);function c(e,o,t){return l.a.set(e,o,{expires:t})}function u(e){return l.a.get(e)}var d={name:"login",components:{HeaderPanel:n.a,BottomPanel:i.a},data:function(){return{welcome:r.a,loginForm:{username:"",password:"",inviteCode:""},loginRules:{username:[{required:!0,trigger:"blur",validator:function(e,o,t){t()}}],password:[{required:!0,trigger:"blur",validator:function(e,o,t){o.length<3?t(new Error("密码不能小于3位")):t()}}],inviteCode:[{required:!0,trigger:"blur",validator:function(e,o,t){o.length<4?t(new Error("邀请码不得少于4位")):o.length>4?t(new Error("邀请码不得少于4位")):t()}}]},loading:!1,pwdType:"password",isLogin:!0}},created:function(){this.loginForm.username=u("username"),this.loginForm.password=u("password"),void 0!==this.loginForm.username&&null!=this.loginForm.username&&""!==this.loginForm.username||(this.loginForm.username="admin"),void 0!==this.loginForm.password&&null!=this.loginForm.password||(this.loginForm.password="macro123")},methods:{showPwd:function(){this.pwdType="password"===this.pwdType?"":"password"},switchPage:function(){this.loginForm={username:"",password:"",inviteCode:""},this.isLogin?this.isLogin=!1:this.isLogin=!0},handleLogin:function(){var e=this;this.$refs.loginForm.validate(function(o){if(!o)return console.log("参数验证不合法！"),!1;e.loading=!0,e.$store.dispatch("Login",e.loginForm).then(function(){e.loading=!1,c("username",e.loginForm.username,15),c("password",e.loginForm.password,15),e.$router.push({path:"/"}),setTimeout(function(){location.reload()},1500)}).catch(function(){e.loading=!1})})},handleRegister:function(){var e=this;this.$refs.loginForm.validate(function(o){if(!o)return console.log("参数验证不合法！"),!1;e.loading=!0,e.$store.dispatch("Register",e.loginForm).then(function(){e.loading=!1,e.$message({message:"注册成功，请登录",type:"success",duration:3e3}),e.isLogin=!0}).catch(function(){e.loading=!1})})},test:function(){}}},m={render:function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("div",{staticClass:"login"},[t("header-panel"),e._v(" "),t("div",{staticClass:"content"},[t("img",{staticClass:"welcome",attrs:{src:e.welcome}}),e._v(" "),t("el-card",{staticClass:"login-form-layout"},[t("el-form",{ref:"loginForm",attrs:{autoComplete:"on",model:e.loginForm,rules:e.loginRules,"label-position":"left"}},[t("h2",{staticClass:"login-title color-main"},[e._v(e._s(e.isLogin?"请登录":"注册账号"))]),e._v(" "),t("el-form-item",{attrs:{prop:"username"}},[t("el-input",{attrs:{name:"username",type:"text",autoComplete:"on",placeholder:"请输入手机号/邮箱"},model:{value:e.loginForm.username,callback:function(o){e.$set(e.loginForm,"username",o)},expression:"loginForm.username"}})],1),e._v(" "),t("el-form-item",{attrs:{prop:"password"}},[t("el-input",{attrs:{name:"password",type:e.pwdType,autoComplete:"on",placeholder:"请输入密码"},nativeOn:{keyup:function(o){return!o.type.indexOf("key")&&e._k(o.keyCode,"enter",13,o.key,"Enter")?null:e.handleLogin.apply(null,arguments)}},model:{value:e.loginForm.password,callback:function(o){e.$set(e.loginForm,"password",o)},expression:"loginForm.password"}},[t("span",{attrs:{slot:"suffix"},on:{click:e.showPwd},slot:"suffix"},[t("svg-icon",{staticClass:"color-main",attrs:{"icon-class":"eye"}})],1)])],1),e._v(" "),e.isLogin?e._e():t("el-form-item",{attrs:{prop:"inviteCode"}},[t("el-input",{attrs:{name:"inviteCode",type:"text",autoComplete:"on",placeholder:"请输入邀请码"},model:{value:e.loginForm.inviteCode,callback:function(o){e.$set(e.loginForm,"inviteCode",o)},expression:"loginForm.inviteCode"}})],1),e._v(" "),t("el-form-item",{staticStyle:{"margin-bottom":"27px","text-align":"center"}},[t("el-button",{staticClass:"button",staticStyle:{width:"100%"},attrs:{type:"primary",loading:e.loading},nativeOn:{click:function(o){o.preventDefault(),e.isLogin?e.handleLogin():e.handleRegister()}}},[e._v("\n            "+e._s(e.isLogin?"登录":"注册")+"\n          ")])],1),e._v(" "),t("div",{staticClass:"bottom"},[t("div",{staticClass:"tips",on:{click:e.test}},[e._v("没有账号？")]),e._v(" "),t("div",{staticClass:"register",on:{click:e.switchPage}},[e._v(e._s(e.isLogin?"立即注册":"立即登录"))])])],1)],1)],1),e._v(" "),t("bottom-panel")],1)},staticRenderFns:[]};var g=t("VU/8")(d,m,!1,function(e){t("IILt")},"data-v-db4e6e60",null);o.default=g.exports}});
//# sourceMappingURL=7.f97c8d0a56c51abde462.js.map